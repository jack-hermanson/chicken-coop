{% extends "base.html" %}

{% from "macros/card.html" import simple_card, card_body, card_header %}
{% from "macros/pagination.html" import pagination %}

{% set title = "Shifts" %}
{% set active_route = "main" %}

{% block body %}
    <div class="row mb-3">
        <div class="col-12">
            <p class="lead mb-0">Every day has two shiftsâ€”one for the morning and one for the afternoon/evening.</p>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <ul class="list-group">
                {% for shift_instance in next_shift_instances %}
                    <li class="list-group-item d-block">
                        {% if todays_date == shift_instance.due_date.date() %}
                            Due today!
                        {% endif %}
                        <h5>{{ shift_instance.due_date.strftime("%A, %b %e") }}: {{ shift_instance.shift.time_of_day|time_of_day_str }}</h5>

                        <p class="mb-0">This shift instance has {% if not shift_instance.completed_timestamp %}
                            NOT{% endif %} been completed</p>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <h4>Previous Shifts</h4>
        </div>
    </div>

    {#  Previous Shift Instances  #}
    <div class="row" id="previous-shift-instances">
        <div class="col-12">
            <ul class="list-group">
                {% for previous_shift_instance in previous_shift_instances.items %}
                    <li class="list-group-item d-block">
                        <h6>{{ previous_shift_instance.due_date.strftime("%A, %b %e") }}: {{ previous_shift_instance.shift.time_of_day|time_of_day_str }}</h6>
                        <p class="mb-0">
                            {% if previous_shift_instance.completed_timestamp %}
                                Completed by {{ previous_shift_instance.completed_by }} at {{ previous_shift_instance.completed_timestamp }}.
                            {% else %}
                                Not completed.
                            {% endif %}
                        </p>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-12 d-flex justify-content-center">
            <div>
                {{ pagination(
                            endpoint="main.index",
                            pagination_model=previous_shift_instances,
                            suffix="#previous-shift-instances") }}
            </div>
        </div>
    </div>
{% endblock body %}