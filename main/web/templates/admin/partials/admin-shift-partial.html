{% from "macros/card.html" import simple_card, card_header, card_body %}
{% from "macros/form.html" import form_group %}

{% call simple_card(class="mb-4", id=("admin-shift-" + assign_shift_view_model.shift.shift_id|string)) %}
    {{ card_header(assign_shift_view_model.shift.day_of_week|day_of_week_str + ' ' + assign_shift_view_model.shift.time_of_day|time_of_day_str) }}
    {% call card_body() %}
        {% if alert_message %}
            <div class="alert alert-success">
                <p class="mb-0">{{ alert_message }}</p>
            </div>
        {% endif %}
        <form
            hx-post="{{ url_for('admin.save_shift') }}"
            hx-target="#admin-shift-{{ assign_shift_view_model.shift.shift_id }}"
            hx-swap="outerHTML"
        >
            {{ assign_shift_view_model.assign_shift_form.csrf_token(id="csrf-token-" + assign_shift_view_model.shift.shift_id|string) }}
            {{ assign_shift_view_model.assign_shift_form.shift_id(id="admin-shift-id-" + assign_shift_view_model.shift.shift_id|string) }}
{#            {{ form_group(assign_shift_view_model.assign_shift_form, "assigned_to") }}#}
            {{ form_group(assign_shift_view_model.assign_shift_form, "assigned_to", id=("assigned-to-input-" + assign_shift_view_model.shift.shift_id|string)) }}
{#            {{ form_group(assign_shift_view_model.assign_shift_form, "assigned_to", render_kw={"id": ("assigned-to-input-" + assign_shift_view_model.shift.shift_id|string)}) }}#}
            {{ assign_shift_view_model.assign_shift_form.submit(class="btn btn-success") }}
            {# todo: mobile friendliness #}
        </form>
    {% endcall %}
{% endcall %}